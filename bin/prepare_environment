#!/usr/bin/env bash

echo "Check required software"
echo "========================"
command -v curl > /dev/null || ( echo "curl is not installed"; exit 1)
command -v git > /dev/null || ( echo "git is not installed"; exit 1)
command -v conda > /dev/null || ( echo "conda is not installed"; exit 1)
# make sure we have ~20GB available for uniref90
echo "ok"
echo ""

echo "Create conda environment"
echo "========================"
echo ""
conda config --add channels bioconda
conda config --add channels biocore
conda env create -f pyl_protein_prediction.yml
#source activate pyl_protein_prediction
#pip install gooey
#source deactivate
echo ""

echo "Download UniRef90 database (it can take several hours)"
echo "======================================================"
echo ""
curl ftp://ftp.uniprot.org/pub/databases/uniprot/uniref/uniref90/uniref90.fasta.gz -o data/uniref90.fasta.gz
gunzip data/uniref90.fasta.gz
echo ""
